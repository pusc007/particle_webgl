!function(t){var n={};function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(r,a,function(n){return t[n]}.bind(null,a));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=18)}([function(t,n){t.exports=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}},function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}},function(t,n,e){var r=e(14),a=e(15),o=e(16),i=e(17);t.exports=function(t){return r(t)||a(t)||o(t)||i()}},function(t,n){t.exports=function(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}},function(t,n){t.exports="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uSize;\nvarying vec2 vTextureCoord;\nvarying vec2 vSize;\nvoid main(void){\n  vSize=uSize;\n  vTextureCoord=aTextureCoord;\n  vec4 pos=uModelViewMatrix*vec4(aVertexPosition*uSize*.5,0.,1.);\n  gl_Position=uProjectionMatrix*pos;\n}"},function(t,n){t.exports="precision highp float;\nvarying vec2 vTextureCoord;\nvarying vec2 vSize;\nuniform sampler2D uGradientColorSampler;\n\nfloat distLine(vec2 p,vec2 a,vec2 b,float w){\n  vec2 pa=p-a;\n  vec2 ba=b-a;\n  float t=clamp(dot(pa,ba)/dot(ba,ba),0.,1.);\n  return length(pa-ba*t)/w;\n}\n\n/*vec4 drawLight(float d){\n  float highColorRate=smoothstep(1.,0.,d);\n  float baseColorRate=smoothstep(1.,0.,d/4.);\n  float glowColorRate=smoothstep(1.,0.,d/8.);\n  float endColorRate=smoothstep(1.,0.,d/16.);\n  vec4 highColor=vec4(1.,1.,1.,1.);\n  vec4 baseColor=vec4(.35,.98,.98,1.);\n  vec4 glowColor=vec4(.28,.73,.78,1.);\n  vec4 endColor=vec4(.2,.25,.91,1.);\n  vec4 color=mix(.5*baseColor,highColor,highColorRate)*endColorRate;\n  color=mix(.25*glowColor,color,baseColorRate)*endColorRate;\n  color=mix(.125*endColor,color,glowColorRate)*endColorRate;\n  return color;\n}\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w){\n  float d=distLine(p,a,b,w);\n  return drawLight(d);\n}*/\n\nfloat drawLight(float d,float power){\n  float f=1.;\n  float a=1.;\n  const int N=3;\n  float maxF=pow(2.,float(N));\n  for(int i=0;i<N;i++){\n    a*=.5;\n    float colorRate=smoothstep(1.,0.,2.*a*d);\n    float rate=pow(colorRate,a*maxF);\n    f=mix(a,f,rate);\n  }\n  f*=power*smoothstep(1.,0.,d/maxF);\n  return f;\n}\nvec4 distLightPoint(float d,float power,sampler2D gradientColorSampler){\n  float f=drawLight(d,power);\n  return vec4(f*texture2D(gradientColorSampler,vec2(f,0.)));\n}\nvec4 distLightLine(vec2 p,vec2 a,vec2 b,float w,float power,sampler2D gradientColorSampler){\n  float d=distLine(p,a,b,w);\n  float f=drawLight(d,power);\n  return vec4(f*texture2D(gradientColorSampler,vec2(f,0.)));\n}\n\nvoid main(void){\n  vec4 color=vec4(0.);\n  vec2 aspectRatio=vec2(vSize.x/vSize.y,1.);\n  \n  vec2 coord=vTextureCoord*aspectRatio;\n  vec2 startPos=vec2(0.,.5)*aspectRatio+vec2(aspectRatio.y*.5,0.);\n  vec2 endPos=vec2(1.,.5)*aspectRatio-vec2(aspectRatio.y*.5,0.);\n  float r=aspectRatio.y*.5/16.;\n  color+=distLightLine(coord,startPos,endPos,r,1.,uGradientColorSampler);\n  gl_FragColor=color;\n}"},,,,,,,,,function(t,n,e){var r=e(3);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,n){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,n,e){var r=e(3);t.exports=function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",(function(){return p})),e.d(r,"clone",(function(){return M})),e.d(r,"copy",(function(){return b})),e.d(r,"fromValues",(function(){return m})),e.d(r,"set",(function(){return g})),e.d(r,"identity",(function(){return y})),e.d(r,"transpose",(function(){return R})),e.d(r,"invert",(function(){return E})),e.d(r,"adjoint",(function(){return x})),e.d(r,"determinant",(function(){return A})),e.d(r,"multiply",(function(){return T})),e.d(r,"translate",(function(){return w})),e.d(r,"scale",(function(){return S})),e.d(r,"rotate",(function(){return _})),e.d(r,"rotateX",(function(){return C})),e.d(r,"rotateY",(function(){return F})),e.d(r,"rotateZ",(function(){return L})),e.d(r,"fromTranslation",(function(){return P})),e.d(r,"fromScaling",(function(){return k})),e.d(r,"fromRotation",(function(){return U})),e.d(r,"fromXRotation",(function(){return B})),e.d(r,"fromYRotation",(function(){return D})),e.d(r,"fromZRotation",(function(){return I})),e.d(r,"fromRotationTranslation",(function(){return O})),e.d(r,"fromQuat2",(function(){return N})),e.d(r,"getTranslation",(function(){return Y})),e.d(r,"getScaling",(function(){return j})),e.d(r,"getRotation",(function(){return X})),e.d(r,"fromRotationTranslationScale",(function(){return z})),e.d(r,"fromRotationTranslationScaleOrigin",(function(){return G})),e.d(r,"fromQuat",(function(){return q})),e.d(r,"frustum",(function(){return Q})),e.d(r,"perspective",(function(){return V})),e.d(r,"perspectiveFromFieldOfView",(function(){return W})),e.d(r,"ortho",(function(){return H})),e.d(r,"lookAt",(function(){return Z})),e.d(r,"targetTo",(function(){return K})),e.d(r,"str",(function(){return $})),e.d(r,"frob",(function(){return J})),e.d(r,"add",(function(){return tt})),e.d(r,"subtract",(function(){return nt})),e.d(r,"multiplyScalar",(function(){return et})),e.d(r,"multiplyScalarAndAdd",(function(){return rt})),e.d(r,"exactEquals",(function(){return at})),e.d(r,"equals",(function(){return ot})),e.d(r,"mul",(function(){return it})),e.d(r,"sub",(function(){return ut}));var a=e(0),o=e.n(a),i=e(1),u=e.n(i),c=function(){function t(){o()(this,t)}return u()(t,null,[{key:"mix",value:function(t,n,e){return t*(1-e)+n*e}},{key:"fract",value:function(t){return(t%=1)<0?t+1:t}},{key:"inverseMix",value:function(t,n,e){return(e-t)/(n-t)}},{key:"clamp",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<=n?n:t>=e?e:t}},{key:"smoothstep",value:function(t,n,e){return(e=clamp(inverseMix(t,n,e)))*e*(3-2*e)}}]),t}(),f=function(){function t(){o()(this,t)}return u()(t,null,[{key:"normalize",value:function(n){return t.length(n)?t.scale(n,1/t.length(n)):n}},{key:"rotate",value:function(t,n){var e=Math.cos(n),r=Math.sin(n);return[t[0]*e-t[1]*r,t[1]*e+t[0]*r]}},{key:"dot",value:function(t,n){return t[0]*n[0]+t[1]*n[1]}},{key:"cross",value:function(t,n){return t[0]*n[1]-t[1]*n[0]}},{key:"add",value:function(t,n){return[t[0]+n[0],t[1]+n[1]]}},{key:"sub",value:function(t,n){return[t[0]-n[0],t[1]-n[1]]}},{key:"projection",value:function(n,e){var r=t.dot(n,e)/t.dot(e,e);return[e[0]*r,e[1]*r]}},{key:"length",value:function(n){return Math.sqrt(t.dot(n,n))}},{key:"mul",value:function(t,n){return[t[0]*n[0],t[1]*n[1]]}},{key:"div",value:function(t,n){return[t[0]/n[0],t[1]/n[1]]}},{key:"scale",value:function(t,n){return[t[0]*n,t[1]*n]}},{key:"collisionCalc",value:function(n,e,r,a){return t.scale(t.add(t.scale(n,r-a),t.scale(e,2*a)),1/(r+a))}},{key:"getAngle",value:function(t){return Math.atan2(t[1],t[0])}},{key:"floor",value:function(t){return[Math.floor(t[0]),Math.floor(t[1])]}},{key:"fract",value:function(t){return[c.fract(t[0]),c.fract(t[1])]}},{key:"sin",value:function(t){return[Math.sin(t[0]),Math.sin(t[1])]}},{key:"cos",value:function(t){return[Math.cos(t[0]),Math.cos(t[1])]}},{key:"distance",value:function(n,e){return t.length(t.sub(e,n))}},{key:"mix",value:function(t,n,e){return[c.mix(t[0],n[0],e),c.mix(t[1],n[1],e)]}},{key:"abs",value:function(t){return[Math.abs(t[0]),Math.abs(t[1])]}},{key:"getLine",value:function(n,e){return{pos:n,dir:t.sub(e,n)}}}]),t}(),s=function(){function t(){o()(this,t)}return u()(t,null,[{key:"set",value:function(t,n,e){return t[0]=n,t[1]=e,t}},{key:"normalize",value:function(n){var e=f.length(n);return e&&t.scale(n,1/e),n}},{key:"add",value:function(t,n){return t[0]+=n[0],t[1]+=n[1],t}},{key:"sub",value:function(t,n){return t[0]-=n[0],t[1]-=n[1],t}},{key:"scale",value:function(t,n){return t[0]*=n,t[1]*=n,t}},{key:"rotate",value:function(t,n){var e=Math.cos(n),r=Math.sin(n),a=[t[0]*e-t[1]*r,t[1]*e+t[0]*r];return t[0]=a[0],t[1]=a[1],t}}]),t}(),l=e(2),h=e.n(l),d=1e-6,v="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function p(){var t=new v(16);return v!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function M(t){var n=new v(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function b(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function m(t,n,e,r,a,o,i,u,c,f,s,l,h,d,p,M){var b=new v(16);return b[0]=t,b[1]=n,b[2]=e,b[3]=r,b[4]=a,b[5]=o,b[6]=i,b[7]=u,b[8]=c,b[9]=f,b[10]=s,b[11]=l,b[12]=h,b[13]=d,b[14]=p,b[15]=M,b}function g(t,n,e,r,a,o,i,u,c,f,s,l,h,d,v,p,M){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=M,t}function y(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function E(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],h=n[10],d=n[11],v=n[12],p=n[13],M=n[14],b=n[15],m=e*u-r*i,g=e*c-a*i,y=e*f-o*i,R=r*c-a*u,E=r*f-o*u,x=a*f-o*c,A=s*p-l*v,T=s*M-h*v,w=s*b-d*v,S=l*M-h*p,_=l*b-d*p,C=h*b-d*M,F=m*C-g*_+y*S+R*w-E*T+x*A;return F?(F=1/F,t[0]=(u*C-c*_+f*S)*F,t[1]=(a*_-r*C-o*S)*F,t[2]=(p*x-M*E+b*R)*F,t[3]=(h*E-l*x-d*R)*F,t[4]=(c*w-i*C-f*T)*F,t[5]=(e*C-a*w+o*T)*F,t[6]=(M*y-v*x-b*g)*F,t[7]=(s*x-h*y+d*g)*F,t[8]=(i*_-u*w+f*A)*F,t[9]=(r*w-e*_-o*A)*F,t[10]=(v*E-p*y+b*m)*F,t[11]=(l*y-s*E-d*m)*F,t[12]=(u*T-i*S-c*A)*F,t[13]=(e*S-r*T+a*A)*F,t[14]=(p*g-v*R-M*m)*F,t[15]=(s*R-l*g+h*m)*F,t):null}function x(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],c=n[6],f=n[7],s=n[8],l=n[9],h=n[10],d=n[11],v=n[12],p=n[13],M=n[14],b=n[15];return t[0]=u*(h*b-d*M)-l*(c*b-f*M)+p*(c*d-f*h),t[1]=-(r*(h*b-d*M)-l*(a*b-o*M)+p*(a*d-o*h)),t[2]=r*(c*b-f*M)-u*(a*b-o*M)+p*(a*f-o*c),t[3]=-(r*(c*d-f*h)-u*(a*d-o*h)+l*(a*f-o*c)),t[4]=-(i*(h*b-d*M)-s*(c*b-f*M)+v*(c*d-f*h)),t[5]=e*(h*b-d*M)-s*(a*b-o*M)+v*(a*d-o*h),t[6]=-(e*(c*b-f*M)-i*(a*b-o*M)+v*(a*f-o*c)),t[7]=e*(c*d-f*h)-i*(a*d-o*h)+s*(a*f-o*c),t[8]=i*(l*b-d*p)-s*(u*b-f*p)+v*(u*d-f*l),t[9]=-(e*(l*b-d*p)-s*(r*b-o*p)+v*(r*d-o*l)),t[10]=e*(u*b-f*p)-i*(r*b-o*p)+v*(r*f-o*u),t[11]=-(e*(u*d-f*l)-i*(r*d-o*l)+s*(r*f-o*u)),t[12]=-(i*(l*M-h*p)-s*(u*M-c*p)+v*(u*h-c*l)),t[13]=e*(l*M-h*p)-s*(r*M-a*p)+v*(r*h-a*l),t[14]=-(e*(u*M-c*p)-i*(r*M-a*p)+v*(r*c-a*u)),t[15]=e*(u*h-c*l)-i*(r*h-a*l)+s*(r*c-a*u),t}function A(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],c=t[7],f=t[8],s=t[9],l=t[10],h=t[11],d=t[12],v=t[13],p=t[14],M=t[15];return(n*i-e*o)*(l*M-h*p)-(n*u-r*o)*(s*M-h*v)+(n*c-a*o)*(s*p-l*v)+(e*u-r*i)*(f*M-h*d)-(e*c-a*i)*(f*p-l*d)+(r*c-a*u)*(f*v-s*d)}function T(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=n[9],d=n[10],v=n[11],p=n[12],M=n[13],b=n[14],m=n[15],g=e[0],y=e[1],R=e[2],E=e[3];return t[0]=g*r+y*u+R*l+E*p,t[1]=g*a+y*c+R*h+E*M,t[2]=g*o+y*f+R*d+E*b,t[3]=g*i+y*s+R*v+E*m,g=e[4],y=e[5],R=e[6],E=e[7],t[4]=g*r+y*u+R*l+E*p,t[5]=g*a+y*c+R*h+E*M,t[6]=g*o+y*f+R*d+E*b,t[7]=g*i+y*s+R*v+E*m,g=e[8],y=e[9],R=e[10],E=e[11],t[8]=g*r+y*u+R*l+E*p,t[9]=g*a+y*c+R*h+E*M,t[10]=g*o+y*f+R*d+E*b,t[11]=g*i+y*s+R*v+E*m,g=e[12],y=e[13],R=e[14],E=e[15],t[12]=g*r+y*u+R*l+E*p,t[13]=g*a+y*c+R*h+E*M,t[14]=g*o+y*f+R*d+E*b,t[15]=g*i+y*s+R*v+E*m,t}function w(t,n,e){var r,a,o,i,u,c,f,s,l,h,d,v,p=e[0],M=e[1],b=e[2];return n===t?(t[12]=n[0]*p+n[4]*M+n[8]*b+n[12],t[13]=n[1]*p+n[5]*M+n[9]*b+n[13],t[14]=n[2]*p+n[6]*M+n[10]*b+n[14],t[15]=n[3]*p+n[7]*M+n[11]*b+n[15]):(r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=n[8],h=n[9],d=n[10],v=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=h,t[10]=d,t[11]=v,t[12]=r*p+u*M+l*b+n[12],t[13]=a*p+c*M+h*b+n[13],t[14]=o*p+f*M+d*b+n[14],t[15]=i*p+s*M+v*b+n[15]),t}function S(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function _(t,n,e,r){var a,o,i,u,c,f,s,l,h,v,p,M,b,m,g,y,R,E,x,A,T,w,S,_,C=r[0],F=r[1],L=r[2],P=Math.hypot(C,F,L);return P<d?null:(C*=P=1/P,F*=P,L*=P,a=Math.sin(e),i=1-(o=Math.cos(e)),u=n[0],c=n[1],f=n[2],s=n[3],l=n[4],h=n[5],v=n[6],p=n[7],M=n[8],b=n[9],m=n[10],g=n[11],y=C*C*i+o,R=F*C*i+L*a,E=L*C*i-F*a,x=C*F*i-L*a,A=F*F*i+o,T=L*F*i+C*a,w=C*L*i+F*a,S=F*L*i-C*a,_=L*L*i+o,t[0]=u*y+l*R+M*E,t[1]=c*y+h*R+b*E,t[2]=f*y+v*R+m*E,t[3]=s*y+p*R+g*E,t[4]=u*x+l*A+M*T,t[5]=c*x+h*A+b*T,t[6]=f*x+v*A+m*T,t[7]=s*x+p*A+g*T,t[8]=u*w+l*S+M*_,t[9]=c*w+h*S+b*_,t[10]=f*w+v*S+m*_,t[11]=s*w+p*S+g*_,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function C(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],c=n[7],f=n[8],s=n[9],l=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+f*r,t[5]=i*a+s*r,t[6]=u*a+l*r,t[7]=c*a+h*r,t[8]=f*a-o*r,t[9]=s*a-i*r,t[10]=l*a-u*r,t[11]=h*a-c*r,t}function F(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],f=n[8],s=n[9],l=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-f*r,t[1]=i*a-s*r,t[2]=u*a-l*r,t[3]=c*a-h*r,t[8]=o*r+f*a,t[9]=i*r+s*a,t[10]=u*r+l*a,t[11]=c*r+h*a,t}function L(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],c=n[3],f=n[4],s=n[5],l=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+f*r,t[1]=i*a+s*r,t[2]=u*a+l*r,t[3]=c*a+h*r,t[4]=f*a-o*r,t[5]=s*a-i*r,t[6]=l*a-u*r,t[7]=h*a-c*r,t}function P(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function k(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,n,e){var r,a,o,i=e[0],u=e[1],c=e[2],f=Math.hypot(i,u,c);return f<d?null:(i*=f=1/f,u*=f,c*=f,r=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=i*i*o+a,t[1]=u*i*o+c*r,t[2]=c*i*o-u*r,t[3]=0,t[4]=i*u*o-c*r,t[5]=u*u*o+a,t[6]=c*u*o+i*r,t[7]=0,t[8]=i*c*o+u*r,t[9]=u*c*o-i*r,t[10]=c*c*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function B(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,c=a+a,f=o+o,s=r*u,l=r*c,h=r*f,d=a*c,v=a*f,p=o*f,M=i*u,b=i*c,m=i*f;return t[0]=1-(d+p),t[1]=l+m,t[2]=h-b,t[3]=0,t[4]=l-m,t[5]=1-(s+p),t[6]=v+M,t[7]=0,t[8]=h+b,t[9]=v-M,t[10]=1-(s+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function N(t,n){var e=new v(3),r=-n[0],a=-n[1],o=-n[2],i=n[3],u=n[4],c=n[5],f=n[6],s=n[7],l=r*r+a*a+o*o+i*i;return l>0?(e[0]=2*(u*i+s*r+c*o-f*a)/l,e[1]=2*(c*i+s*a+f*r-u*o)/l,e[2]=2*(f*i+s*o+u*a-c*r)/l):(e[0]=2*(u*i+s*r+c*o-f*a),e[1]=2*(c*i+s*a+f*r-u*o),e[2]=2*(f*i+s*o+u*a-c*r)),O(t,n,e),t}function Y(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function j(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],c=n[8],f=n[9],s=n[10];return t[0]=Math.hypot(e,r,a),t[1]=Math.hypot(o,i,u),t[2]=Math.hypot(c,f,s),t}function X(t,n){var e=new v(3);j(e,n);var r=1/e[0],a=1/e[1],o=1/e[2],i=n[0]*r,u=n[1]*a,c=n[2]*o,f=n[4]*r,s=n[5]*a,l=n[6]*o,h=n[8]*r,d=n[9]*a,p=n[10]*o,M=i+s+p,b=0;return M>0?(b=2*Math.sqrt(M+1),t[3]=.25*b,t[0]=(l-d)/b,t[1]=(h-c)/b,t[2]=(u-f)/b):i>s&&i>p?(b=2*Math.sqrt(1+i-s-p),t[3]=(l-d)/b,t[0]=.25*b,t[1]=(u+f)/b,t[2]=(h+c)/b):s>p?(b=2*Math.sqrt(1+s-i-p),t[3]=(h-c)/b,t[0]=(u+f)/b,t[1]=.25*b,t[2]=(l+d)/b):(b=2*Math.sqrt(1+p-i-s),t[3]=(u-f)/b,t[0]=(h+c)/b,t[1]=(l+d)/b,t[2]=.25*b),t}function z(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],c=a+a,f=o+o,s=i+i,l=a*c,h=a*f,d=a*s,v=o*f,p=o*s,M=i*s,b=u*c,m=u*f,g=u*s,y=r[0],R=r[1],E=r[2];return t[0]=(1-(v+M))*y,t[1]=(h+g)*y,t[2]=(d-m)*y,t[3]=0,t[4]=(h-g)*R,t[5]=(1-(l+M))*R,t[6]=(p+b)*R,t[7]=0,t[8]=(d+m)*E,t[9]=(p-b)*E,t[10]=(1-(l+v))*E,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function G(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],c=n[3],f=o+o,s=i+i,l=u+u,h=o*f,d=o*s,v=o*l,p=i*s,M=i*l,b=u*l,m=c*f,g=c*s,y=c*l,R=r[0],E=r[1],x=r[2],A=a[0],T=a[1],w=a[2],S=(1-(p+b))*R,_=(d+y)*R,C=(v-g)*R,F=(d-y)*E,L=(1-(h+b))*E,P=(M+m)*E,k=(v+g)*x,U=(M-m)*x,B=(1-(h+p))*x;return t[0]=S,t[1]=_,t[2]=C,t[3]=0,t[4]=F,t[5]=L,t[6]=P,t[7]=0,t[8]=k,t[9]=U,t[10]=B,t[11]=0,t[12]=e[0]+A-(S*A+F*T+k*w),t[13]=e[1]+T-(_*A+L*T+U*w),t[14]=e[2]+w-(C*A+P*T+B*w),t[15]=1,t}function q(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,c=a+a,f=e*i,s=r*i,l=r*u,h=a*i,d=a*u,v=a*c,p=o*i,M=o*u,b=o*c;return t[0]=1-l-v,t[1]=s+b,t[2]=h-M,t[3]=0,t[4]=s-b,t[5]=1-f-v,t[6]=d+p,t[7]=0,t[8]=h+M,t[9]=d-p,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Q(t,n,e,r,a,o,i){var u=1/(e-n),c=1/(a-r),f=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*c,t[10]=(i+o)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*f,t[15]=0,t}function V(t,n,e,r,a){var o,i=1/Math.tan(n/2);return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}function W(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),f=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(a-o)*f*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function H(t,n,e,r,a,o,i){var u=1/(n-e),c=1/(r-a),f=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*c,t[14]=(i+o)*f,t[15]=1,t}function Z(t,n,e,r){var a,o,i,u,c,f,s,l,h,v,p=n[0],M=n[1],b=n[2],m=r[0],g=r[1],R=r[2],E=e[0],x=e[1],A=e[2];return Math.abs(p-E)<d&&Math.abs(M-x)<d&&Math.abs(b-A)<d?y(t):(s=p-E,l=M-x,h=b-A,a=g*(h*=v=1/Math.hypot(s,l,h))-R*(l*=v),o=R*(s*=v)-m*h,i=m*l-g*s,(v=Math.hypot(a,o,i))?(a*=v=1/v,o*=v,i*=v):(a=0,o=0,i=0),u=l*i-h*o,c=h*a-s*i,f=s*o-l*a,(v=Math.hypot(u,c,f))?(u*=v=1/v,c*=v,f*=v):(u=0,c=0,f=0),t[0]=a,t[1]=u,t[2]=s,t[3]=0,t[4]=o,t[5]=c,t[6]=l,t[7]=0,t[8]=i,t[9]=f,t[10]=h,t[11]=0,t[12]=-(a*p+o*M+i*b),t[13]=-(u*p+c*M+f*b),t[14]=-(s*p+l*M+h*b),t[15]=1,t)}function K(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],c=r[1],f=r[2],s=a-e[0],l=o-e[1],h=i-e[2],d=s*s+l*l+h*h;d>0&&(s*=d=1/Math.sqrt(d),l*=d,h*=d);var v=c*h-f*l,p=f*s-u*h,M=u*l-c*s;return(d=v*v+p*p+M*M)>0&&(v*=d=1/Math.sqrt(d),p*=d,M*=d),t[0]=v,t[1]=p,t[2]=M,t[3]=0,t[4]=l*M-h*p,t[5]=h*v-s*M,t[6]=s*p-l*v,t[7]=0,t[8]=s,t[9]=l,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function $(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function J(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function tt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function nt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function et(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function rt(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function at(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function ot(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],c=t[6],f=t[7],s=t[8],l=t[9],h=t[10],v=t[11],p=t[12],M=t[13],b=t[14],m=t[15],g=n[0],y=n[1],R=n[2],E=n[3],x=n[4],A=n[5],T=n[6],w=n[7],S=n[8],_=n[9],C=n[10],F=n[11],L=n[12],P=n[13],k=n[14],U=n[15];return Math.abs(e-g)<=d*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-y)<=d*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-R)<=d*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(o-E)<=d*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(i-x)<=d*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-A)<=d*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(c-T)<=d*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-w)<=d*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(s-S)<=d*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-_)<=d*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(h-C)<=d*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(v-F)<=d*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(p-L)<=d*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(M-P)<=d*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(b-k)<=d*Math.max(1,Math.abs(b),Math.abs(k))&&Math.abs(m-U)<=d*Math.max(1,Math.abs(m),Math.abs(U))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var it=T,ut=nt,ct=function(t,n,e){var r=t.createShader(n);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("編譯著色器時發生錯誤: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)},ft=function(t,n,e){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Float32Array,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.STATIC_DRAW,i=t.createBuffer(),u=0,c={buffer:i,get data(){return r},get length(){return r.length},set:function(n){r=new a(n),u=100*Math.ceil(r.length/e/100),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*e*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,r)},add:function(n){var c=r.length,f=100*Math.floor(r.length/e/100);f>=u&&(u=f+100,t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,u*e*4,o),t.bufferSubData(t.ARRAY_BUFFER,0,r));var s=new a(c+e);s.set(r),r=s,this.item(c/e,n)},item:function(n,o){var u=new a(o);r.set(u,n*e),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferSubData(t.ARRAY_BUFFER,n*e*4,u)},getItem:function(t){return Array.from(r.slice(t*e,(t+1)*e))}};return c.set(n),c},st=function(t){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n},lt=function(t,n){var e=st(t),r=new Image;return r.onload=function(){e.width=r.width,e.height=r.height,t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.bindTexture(t.TEXTURE_2D,null)},r.src=n,e},ht=function(t,n,e,r){t.bindFramebuffer(t.FRAMEBUFFER,n),void 0!==e&&void 0!==r&&t.viewport(0,0,e,r)},dt=function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n?e?ht(t,n.framebuffer,n.width,n.height):ht(t,n.framebuffer):e?ht(t,null,t.canvas.width,t.canvas.height):ht(t,null)},vt=function(t,n,e,r){var a=t.getAttribLocation(n,e);return t.enableVertexAttribArray(a),function(n){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(a,r,t.FLOAT,!1,0,0)}},pt=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniform2fv(r,n)}},Mt=function(t,n,e,r){var a=t.getUniformLocation(n,e);return function(n){t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,n),t.uniform1i(a,r)}},bt=function(t,n,e){var r=t.getUniformLocation(n,e);return function(n){t.uniformMatrix4fv(r,!1,n)}},mt=function(t){t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)},gt={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},yt=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.94;o()(this,t),this.options={pos:n,velocity:e,direct:r,lifespan:a,thickness:i,friction:u,gravity:[0,.981],colorStart:[1,0,0,1],colorEnd:[1,1,0,1]},this.init()}return u()(t,[{key:"init",value:function(){this.prevPos=this.options.pos.slice(),this.pos=this.options.pos.slice(),this.velocityPos=[Math.cos(this.options.direct)*this.options.velocity,Math.sin(this.options.direct)*this.options.velocity],this.lifespan=this.options.lifespan,this.maxlife=this.lifespan,this.swing=Math.random()}},{key:"update",value:function(t){s.set.apply(s,[this.prevPos].concat(h()(this.pos))),s.add(this.pos,this.velocityPos);var n=[0,Math.sin(2*this.swing*Math.PI)];s.rotate(n,f.getAngle(this.velocityPos)),s.scale(n,this.lifespan/this.maxlife),s.add(this.velocityPos,n),s.add(this.velocityPos,this.options.gravity),s.scale(this.velocityPos,this.options.friction),this.swing+=.07,this.swing%=1,this.lifespan>0&&(this.lifespan-=t)}},{key:"setColor",value:function(t,n){n&&(this.options.colorStart=n),t&&(this.options.colorEnd=t)}},{key:"positions",get:function(){return[].concat(h()(this.prevPos),h()(this.pos))}},{key:"colors",get:function(){return[].concat(h()(this.options.colorEnd),h()(this.options.colorStart))}},{key:"lineWidths",get:function(){var t=this.lifespan/this.maxlife;return[0,0,0,0].concat([t*Math.min(this.options.thickness/5,1),0,0,0])}}]),t}(),Rt=e(4),Et=e.n(Rt),xt=e(5),At=e.n(xt),Tt=function(t,n,e){var r=function(t,n,e){var r=ct(t,t.VERTEX_SHADER,n),a=ct(t,t.FRAGMENT_SHADER,e),o=t.createProgram();return t.attachShader(o,r),t.attachShader(o,a),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)?o:(alert("無法初始化著色器程序: "+t.getProgramInfoLog(o)),null)}(t,n,e);return{program:r,attribLocations:{vertexPosition:vt(t,r,"aVertexPosition",2),textureCoord:vt(t,r,"aTextureCoord",2)},uniformLocations:{projectionMatrix:bt(t,r,"uProjectionMatrix"),modelViewMatrix:bt(t,r,"uModelViewMatrix"),gradientColorSampler:Mt(t,r,"uGradientColorSampler",0),size:pt(t,r,"uSize")}}},wt=function(t){return Object.assign(function(t,n,e,r,a){var o=n(t,e,r);return{programInfo:o,use:function(){t.useProgram(o.program)},attribSet:function(t){for(var n in t)o.attribLocations[n]&&o.attribLocations[n](t[n])},uniformSet:function(t){for(var n in t)o.uniformLocations[n]&&o.uniformLocations[n](t[n])},elementSet:function(n){t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}}}(t,Tt,Et.a,At.a),{draw:function(n){t.drawElements(t.TRIANGLES,n,t.UNSIGNED_BYTE,0)}})},St=e.p+"img/gradientColor.f758487c0be0ec72cf38da5d7447431a.jpg",_t=function(t){var n=[[-1,-1],[-1,1],[1,-1],[1,1]].flat(),e=ft(t,n,2),r=[[0,0],[0,1],[1,0],[1,1]].flat();return{positionBufferData:e,textureCoordinatesBufferData:ft(t,r,2),indicesBufferData:function(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uint8Array,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.STATIC_DRAW,o=t.createBuffer(),i=0,u=3,c={buffer:o,get data(){return e},get length(){return e.length},set:function(n){e=new r(n),i=100*Math.ceil(e.length/u/100),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e)},add:function(n){var c=e.length,f=100*Math.floor(e.length/u/100);f>=i&&(i=f+100,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i*u*4,a),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e));var s=new r(c+u);s.set(e),e=s,this.item(c/u,n)},item:function(n,a){var i=new r(a);e.set(i,n*u),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,n*u*4,i)},getItem:function(t){return Array.from(e.slice(t*u,(t+1)*u))}};return c.set(n),c}(t,[[1,2,0],[1,3,2]].flat(),Uint8Array)}},Ct=function(){function t(n,e){o()(this,t),this.canvas=n,this.gl=n.getContext("webgl2",e),this.isWebGL2=!0,this.gl||(this.gl=n.getContext("webgl",e)||n.getContext("experimental-webgl",e),this.isWebGL2=!1)}return u()(t,[{key:"init",value:function(){var t=this.gl;this.programInfos={particleShader:wt(t)},this.buffers={model:_t(t)},this.textures={gradientColor:lt(t,St)},t.enable(t.CULL_FACE),t.enable(t.BLEND),this.particles=[]}},{key:"draw",value:function(t){var n=this.gl,e=r.create();r.ortho.apply(r,[e,0].concat(h()(this.size()),[0,.1,100])),r.translate(e,e,[0,0,-1]),n.blendFunc(n.ONE,n.ONE),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);var a=r.create();this.particles.forEach((function(n,e,r){n.update(t),n.lifespan<=0&&r.splice(e,1)}));var o=this.buffers.model,i=this.programInfos.particleShader;i.use(),i.attribSet({vertexPosition:o.positionBufferData.buffer,textureCoord:o.textureCoordinatesBufferData.buffer}),i.elementSet(o.indicesBufferData.buffer),i.uniformSet({projectionMatrix:e,gradientColorSampler:this.textures.gradientColor}),function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];dt(t,n,r),e&&mt(t)}(n,null,!1),this.particles.forEach((function(t,n,e){var u=t.prevPos,c=t.pos,s=5*gt.easeOutQuad(t.lifespan/t.maxlife),l=f.sub(c,u),d=f.getAngle(l);r.identity(a),r.translate(a,a,[].concat(h()(f.mix(u,c,.5)),[0])),r.rotateZ(a,a,d),i.uniformSet({modelViewMatrix:a,size:[f.length(l)+2*s*9,2*s*9]}),i.draw(o.indicesBufferData.length)}))}},{key:"size",value:function(){return[this.canvas.clientWidth,this.canvas.clientHeight]}},{key:"fire",value:function(t,n,e,r,a,o){this.particles.push(new yt(t,n,e,r,a,o))}}]),t}();!function(){var t=document.querySelector("#glcanvas"),n=new Ct(t,{alpha:!0});if(n.gl){n.init();var e=s.scale(n.size(),.5);t.addEventListener("mousemove",(function(t){s.set(e,t.pageX,t.pageY);for(var r=0;r<3;r++)n.fire(e,2+14*Math.random(),2*Math.random()*Math.PI,.25+.25*Math.random(),2+3*Math.random())}));var r=0;requestAnimationFrame((function t(e){var a=.001*(e-r);r=e,n.draw(a),requestAnimationFrame(t)}));var a=function(){t.width=window.innerWidth,t.height=window.innerHeight};window.addEventListener("resize",a),a()}else alert("無法初始化WebGL。您的瀏覽器或機器可能不支持它。")}()}]);